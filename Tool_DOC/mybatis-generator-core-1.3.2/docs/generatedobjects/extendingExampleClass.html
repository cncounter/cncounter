<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Jul 16, 2012 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>
  Extending the Example Classes</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
        <style>body{padding-top: 20px;}</style>
    
      
    <script type="text/javascript" src="../js/apache-maven-fluido.min.js"></script>

    
    <meta name="Date-Revision-yyyymmdd" content="20120716" />
    <meta http-equiv="Content-Language" content="en" />
    <link rel="stylesheet" type="text/css" href="../mbgstyle.css" />
        </head>
  <body>
      
        
    
        <div class="container-fluid">
                <div id="banner">
        <div class="pull-left">                                <a href="../index.html" id="bannerLeft" title="MyBatis logo">
                                                                                                <img src="../images/logo.png"  alt="MyBatis logo"/>
                </a>
      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>
      
      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">最后更新时间: 2012 年 07月 16日</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 1.3.2</li>
                      
                
                    
      
                  </ul>
      </div>

            <div id="leftColumn" class="sidebar">
        <div class="well">
                
                    
                                   <h5>用户指南</h5>
                  <ul>
                  <li class="none">
                          <a href="../index.html" title="简介">简介</a>
            </li>
                  <li class="none">
                          <a href="../whatsNew.html" title="新特性和更新">新特性和更新</a>
            </li>
                  <li class="none">
                          <a href="../quickstart.html" title="快速入门指南">快速入门指南</a>
            </li>
                                                                                                                          <li class="collapsed">
                          <a href="../running/running.html" title="运行 MyBatis Generator">运行 MyBatis Generator</a>
                  </li>
                  <li class="none">
                          <a href="../afterRunning.html" title="执行 MyBatis Generator 代码生成以后需要做什么">执行 MyBatis Generator 代码生成以后需要做什么</a>
            </li>
                  <li class="none">
                          <a href="../migratingFromIbator.html" title="从 Ibator 迁移">从 Ibator 迁移</a>
            </li>
                  <li class="none">
                          <a href="../migratingFromAbator.html" title="从 Abator 迁移">从 Abator 迁移</a>
            </li>
                                                                                                                                                                                                                                                                                                                                                                    <li class="collapsed">
                          <a href="../configreference/xmlconfig.html" title="XML 配置文件参考手册">XML 配置文件参考手册</a>
                  </li>
                                                                                                                                                      <li class="expanded">
                          <a href="../generatedobjects/results.html" title="使用生成的 Objects">使用生成的 Objects</a>
                    <ul>
                      <li class="none">
                          <a href="../generatedobjects/javamodel.html" title="Java Model Objects">Java Model Objects</a>
            </li>
                      <li class="none">
                          <a href="../generatedobjects/sqlmap.html" title="SQL Map Files">SQL Map Files</a>
            </li>
                      <li class="none">
                          <a href="../generatedobjects/javaclient.html" title="Java Client Objects">Java Client Objects</a>
            </li>
                      <li class="none">
                          <a href="../generatedobjects/exampleClassUsage.html" title="Example Class Usage Notes">Example Class Usage Notes</a>
            </li>
                      <li class="none">
            <strong>Extending the Example Classes</strong>
          </li>
              </ul>
        </li>
                                                                                                                          <li class="collapsed">
                          <a href="../usage/intro.html" title="各种数据库注意事项">各种数据库注意事项</a>
                  </li>
                                                                                                                                                              <li class="collapsed">
                          <a href="../reference/intro.html" title="其他参考信息">其他参考信息</a>
                  </li>
          </ul>
                       <h5>项目文档</h5>
                  <ul>
                                                                                                                                                                                                                                                                                                              <li class="collapsed">
                          <a href="../project-info.html" title="项目文档相关信息">项目文档相关信息</a>
                  </li>
          </ul>
                      
                    
                
            
          <div id="poweredBy">
                            <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                </div>
        </div>
      </div>
      
      <div id="bodyColumn" class="content">
        <div id="contentBox">
                              
          


<h1>Extending the Example Classes</h1>
<p>In some cases it may be desirable to extended the generated example classes.
You may want to add criterion that are specific to your database (such as Oracle
ROWNUM support), or add criterion that are not automatically generated (such as
a 不区分大小写 search).  In situations like these, you may extend the generated
example class to add these additional criteria.</p>

<div class="section"><h2>General Principles<a name="General_Principles"></a></h2>
<p>MyBatis Generator (MBG) generates an &quot;example&quot; class for each table, unless instructed otherwise
in the configuration.  The &quot;example&quot; class用于generate a dynamic where
clause for use in the <tt>xxxByExample</tt> statements.
The standard &quot;example&quot; class includes functionality for all standard SQL predicates.
In some cases, it may be desirable to add additional predicates for the
specific needs of your application.  This may include adding support for non-standard
predicates, or for using database specific functions in your where clauses.</p>

<p>The generated &quot;example&quot; class includes a nested inner class where the actual
functionality of the predicates exists.  This inner class is always named <tt>GeneratedCriteria</tt>.
MBG also generates an inner class named <tt>Criteria</tt> which extends
<tt>GeneratedCriteria</tt> and which you may
use for adding your own functions to the example classes.  The <tt>Criteria</tt>
class will not be deleted by the Eclipse Java code merger, so you may add to it without
fear of losing your changes upon regeneration.</p>
<p>For example, suppose there is a
table called CUSTOMER.  Typically, MBG would generate a class named
<tt>CustomerExample</tt>.  To add functionality to the <tt>CustomerExample</tt> class, you
should add additional methods to the <tt>CustomerExample.Criteria</tt> class.</p>

</div><div class="section"><h2>Extending vs. Plugging In<a name="Extending_vs._Plugging_In"></a></h2>
<p>If you find that you are extending the example classes frequently, it might be
more convenient for you to create a plugin to generate the additional
functionality rather than hand coding the extended classes.  The example below (under
the heading &quot;Single Parameter Predicates&quot;) can also be accomplished with a plugin
as demonstrated by the class
<tt>org.mybatis.generator.plugins.CaseInsensitiveLikePlugin</tt>.</p>

</div><div class="section"><h2>Adding Predicates<a name="Adding_Predicates"></a></h2>
<p>MBG generates a dynamic SQL fragment that allows virtually unlimited
where clauses to be created at run-time.  To accomplish this, the generated SQL
fragment supports four broad types of SQL predicates.  For each type of
SQL predicate, there is a corresponding method in the <tt>GeneratedCriteria</tt>
inner class
that can be used to add a predicate to the dynamic where clause.</p>

<div class="section"><h3>1. Simple String Substitution<a name="a1._Simple_String_Substitution"></a></h3>
<p>This type of predicate is used when there is no need for a property
from the parameter object to be substituted into the where clause.  Examples
include:</p>
<p><tt>FIRST_NAME is null</tt><br />
   <tt>LAST_NAME is not null</tt></p>

<p>The <tt>GeneratedCriteria</tt> class method for this predicate is:</p>
&#160;&#160;&#160;<tt>addCriterion(String anyString)</tt>

<p>Where &quot;anyString&quot; is the string to be substituted into the where clauses.
This method can be used to add any kind of test to the generated where clause.</p>

<p>For example, suppose you wanted to use the SOUNDEX function to do a &quot;sounds like&quot;
name search.  In MySQL, the predicate should look like this:</p>
<tt>SOUNDEX(FIRST_NAME) = SOUNDEX('frod')</tt>
<p>This predicate is too complex to use one of the other methods, so it must
be inserted into the where clause by simple string substitution.  Add the following
method to the <tt>Criteria</tt> inner class for this functionality:</p>
<div><pre>
public Criteria andFirstNameSoundsLike(String value) {
  StringBuffer sb = new StringBuffer(&quot;SOUNDEX(FIRST_NAME) = SOUNDEX('&quot;);
  sb.append(value);
  sb.append(&quot;')&quot;);

  addCriterion(sb.toString());

  return this;
}
</pre></div>

<p>The following code shows the use of this new functionality with the <tt>selectByExample</tt> method:</p>
<div><pre>
CustomerExample example = new CustomerExample();
Criteria criteria = example.createCriteria();
criteria.andFirstNameSoundsLike(&quot;frod&quot;);
List results = selectByExample(example);
</pre></div>

<p>This method can be used to add virtually any predicate to a where clause.
However, it is generally better to use parameter substitution if possible because
the problems of formatting different data types properly (most notably
dates, times, and timestamps).  Also, there is a chance of SQL
injection issues with this method if you expose a too generic method.
If possible, we suggest using one of the other methods listed below.</p>

</div><div class="section"><h3>2. Single Parameter Predicates<a name="a2._Single_Parameter_Predicates"></a></h3>
<p>This type of predicate is used when there is a single property
   from the parameter object to be substituted into the where clause.  Examples
   include</p>
<p><tt>FIRST_NAME = ?</tt><br />
   <tt>LAST_NAME &lt;&gt; ?</tt></p>

<p>The generated <tt>Criteria</tt> class method for this predicate is:</p>
<p>&#160;&#160;&#160;<tt>addCriterion(String anyString, Object anyObject, String propertyName)</tt></p>

<p>Where:</p>
<dl>
  <dt><b>anyString</b></dt>
  <dd>is the string to be substituted into the where clause before a parameter substitution</dd>
  <dt><b>anyObject</b></dt>
  <dd>is the Object to be substituted into the where clause after the string substitution</dd>
  <dt><b>propertyName</b></dt>
  <dd>is a string denoting the property name related to this clause.  This String is only used
      in potential error messages.</dd>
</dl>

<p>This method can be used to add simple tests related to a single parameter to the generated where clause.</p>

<p>For example, suppose you wanted to perform a 不区分大小写 search on certain columns.
In MySQL, the predicate could look like this:</p>
<tt>upper(FIRST_NAME) like ?</tt>
<p>This predicate fits the capabilities of a single parameter predicate - where the predicate
is a string value followed by a single parameter.  Add the following
method to the <tt>ExtendedCriteria</tt> for this functionality:</p>
<div><pre>
public ExtendedCriteria andFirstNameLikeInsensitive(String value) {
  addCriterion(&quot;upper(FIRST_NAME) like&quot;,
    value.toUpperCase(), &quot;firstName&quot;);

  return this;
}
</pre></div>

<p>The following code shows the use of this new functionality with the <tt>selectByExample</tt> method:</p>
<div><pre>
ExtendedExample example = new ExtendedExample();
ExtendedCriteria criteria = (ExtendedCriteria) example.createCriteria();
criteria.andFirstNameLikeInsensitive(&quot;fred%&quot;);
List results = selectByExample(example);
</pre></div>

</div><div class="section"><h3>3. List Predicates<a name="a3._List_Predicates"></a></h3>
<p>List predicates are used to add a variable sized list of values as parameters to a where
clause.  Examples include:</p>
<p><tt>FIRST_NAME IN (?, ?, ?)</tt><br />
<tt>LAST_NAME NOT IN (?, ?, ?, ?)</tt></p>

<p>This predicate is less flexible then the others because it is included specifically
for the &quot;in&quot; and &quot;not in&quot; standard predicates.  Nevertheless, if you find some use for it
the corresponding method in the <tt>Criteria</tt> class is as follows:</p>

<p>&#160;&#160;&#160;<tt>addCriterion(String anyString, List listOfObjects, String propertyName)</tt></p>

<p>Where:</p>
<dl>
  <dt><b>anyString</b></dt>
  <dd>is the string to be substituted into the where clause before a parameter substitution</dd>
  <dt><b>listOfObjects</b></dt>
  <dd>is the List of Objects to be substituted into the where clause after the string substitution
      (an open parenthesis will be appended before the list, list items will be comma delimited,
      and a close parenthesis will be appended after the list).</dd>
  <dt><b>propertyName</b></dt>
  <dd>is a string denoting the property name related to this clause.  This String is only used
      in potential error messages.</dd>
</dl>

</div><div class="section"><h3>4. Between Predicates<a name="a4._Between_Predicates"></a></h3>
<p>Between predicates are used to add a two parameters to a where
clause in a specific format.  Examples include:</p>
<p><tt>FIRST_NAME BETWEEN ? AND ?</tt><br />
<tt>LAST_NAME NOT BETWEEN ? AND ?</tt></p>

<p>This predicate is less flexible then the others because it is included specifically
for the &quot;between&quot; and &quot;not between&quot; standard predicates.  Nevertheless, if you find some use for it
the corresponding method in the <tt>Criteria</tt> class is as follows:</p>

<p>&#160;&#160;&#160;<tt>addCriterion(String anyString, Object object1, Object object2, String propertyName)</tt></p>

<p>Where:</p>
<dl>
  <dt><b>anyString</b></dt>
  <dd>is the string to be substituted into the where clause before a parameter substitution</dd>
  <dt><b>object1</b></dt>
  <dd>is the objects to be substituted into the where clause after the string substitution
      (the word &quot;and&quot; will be appended after this object).</dd>
  <dt><b>object2</b></dt>
  <dd>is the objects to be substituted into the where clause after the word &quot;and&quot;.</dd>
  <dt><b>propertyName</b></dt>
  <dd>is a string denoting the property name related to this clause.  This String is only used
      in potential error messages.</dd>
</dl>



</div></div>

                  </div>
      </div>
    </div>

    <footer class="footer">
            <div class="container-fluid">
              <div class="row span16">Copyright &copy;                    2010-2012
                        <a href="http://www.mybatis.org/">MyBatis.org</a>.
            All Rights Reserved.      
                    
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
